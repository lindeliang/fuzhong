!function(a,b){function c(a){this.options={},d.extend(this.options,a||{}),this._init()}var d=a.Zepto;d.extend(c.prototype,{_init:function(){var a=window.navigator.userAgent.toLowerCase();if(!(a.match(/Mockuai/i)||a.match(/MicroMessenger/i)&&!this.options.right)){var b='<div class="topbar"><div class="top-left"></div><h1>'+this.options.title+'</h1><div class="top-right"></div></div>',c='<div class="topbar notitle"><div class="top-left"></div><div class="top-right"></div></div>';if(this.options.isIndex,this.options.isNoTitle?(d("body").prepend(c),d(".topbar").css("position","absolute")):d("body").css("padding-top","40px").prepend(b),this.options.left&&this.options.left.normal?d(".top-left").html('<a class="left-a" href="javascript:;" onclick="history.go(-1)"></a>'):this.options.left&&this.options.left.custom&&d(".top-left").html('<a class="'+this.options.left.custom.className+'" href="javascript:;" onclick="history.go(-1)">'+this.options.left.custom.text+"</a>"),this.options.right)for(var e=this.options.right,f=0;f<e.length;f++)d(".top-right").append(e[f].html)}},hide:function(a){d(a).hide()},show:function(a){d(a).show()}}),b.topBar=c}(window,window.ctrl||(window.ctrl={}));
!function(a,b){function c(a,b){var c,d=[],e=0;a.forEach(function(a){a.icon?d.push('<li class="bbar"><a href="'+a.link+'"><i class="icon iconfont" data-icon="'+a.icon+'">'+a.icon+"</i><p>"+a.text+"</p></a></li>"):(c=e==b?'<span class="selected"><img src="'+a.icon_selected+'"></span>':'<span><img src="'+a.icon_unselected+'"></span>',d.push('<li class="bbar"><a href="'+a.link+'">'+c+"<p>"+a.text+"</p></a></li>")),e++});var f='<div class="bottombar"><ul>'+d.join("")+"</ul></div>";return f}function d(a){var b=[];a.forEach(function(a){b.push('<li class="bbar"><a href="'+a.link+'"><i class="icon iconfont" data-icon="'+a.icon+'">'+a.icon+"</i><p>"+a.text+"</p></a></li>")});var c='<div class="bottombar"><ul>'+b.join("")+"</ul></div>";return c}function e(a){this.options={},f.extend(this.options,a||{}),this._init()}var f=a.Zepto,g="",h=[g+"/index.html",g+"/categories.html",g+"/cart.html",g+"/mine.html"],i=[{text:"首页",link:"index.html",icon:"&#xe606;"},{text:"分类",link:"categories.html",icon:"&#xe605;"},{text:"购物车",link:"cart.html",icon:"&#xe604;"},{text:"我的",link:"mine.html",icon:"&#xe607;"}],j=[{text:"首页",link:"index.html",icon:"&#xe606;"},{text:"分类",link:"categories.html",icon:"&#xe605;"},{text:"购物车",link:"cart.html",icon:"&#xe604;"},{text:"我的",link:"mine.html",icon:"&#xe607;"}],k=c(i),l='<div class="toolbar"><a href="javascript:void(0);" class="tool-main"></a><a href="'+h[0]+'" class="tool-index"></a><a href="'+h[1]+'" class="tool-categories"></a><a href="'+h[2]+'" class="tool-cart"></a><a href="'+h[3]+'" class="tool-mine"></a></div>';f.extend(e.prototype,{_init:function(){var a=this,b=window.navigator.userAgent.toLowerCase();if(b.match(/MicroMessenger/i))this.options.showBottom=!0,this.options.showCircle=!1;else if(b.match(/Mockuai/i))return;if(this.options.showBottom){this.options.hoverIndex>=0&&(h[this.options.hoverIndex]="javascript:;"),location.href.indexOf("categories.html")>-1?f("body").css("padding-bottom","50px"):f("body").css("padding-bottom","50px"),k=this.isShop()?d(j):this.options.barData?c(this.options.barData,this.options.hoverIndex):k,f("body").append(k);var e=f(".bottombar").find("li").eq(this.options.hoverIndex);e.find("a").css("color",this.options.color),e.find(".iconfont").text(e.find(".iconfont").attr("data-icon")),f(".bottombar").css("background-color",this.options.bgColor),a.show("bottombar")}else a.hide("bottombar");this.options.showCircle?(l=this.options.bottomCircleHtml?this.options.bottomCircleHtml:l,f("body").append(l),f(".tool-main").on("touchstart",function(a){f(this).closest(".toolbar").toggleClass("active"),a.preventDefault()}),f(".toolbar a").on("click",function(a){var b=f(this);b.attr("href").indexOf("h5.ve.cn")>=0&&(b.parent().removeClass("active"),setTimeout(function(){location.href=b.attr("href")},500),a.preventDefault())}),f(".toolbar").css("bottom","10px"),a.show("toolbar")):a.hide("toolbar")},hide:function(a){f(a).hide()},show:function(a){f(a).show()},isShop:function(){var a=new lib.httpurl(location.href),b=a.params,c=b.shop_id?b.shop_id:"",d=b._code_?b._code_:"";return this.options.isShop&&!c?(c=lib.cookie.get("user_id")?lib.cookie.get("user_id"):"",j[0].link="shop.html",!0):c?(j[0].link="shop.html?shop_id="+c+"&_code_="+d,j[1].link="categories.html?shop_id="+c+"&_code_="+d,j[2].link="cart.html?shop_id="+c+"&_code_="+d,j[3].link="mine.html?shop_id="+c+"&_code_="+d,!0):!1}}),b.bottomBar=e}(window,window.ctrl||(window.ctrl={}));
!function(a,b){function c(a){var b=document.createElement("style");document.head.appendChild(b),b.innerHTML=a}function d(b){this.options={},a.extend(this.options,f,b||{}),this._init()}var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(a){setTimeout(a,1/60*1e3)},f={trigger:null,position:null,onClick:function(){},style:".mk-gotop {            position: fixed;            right: 0.4rem;            bottom: 1rem;            z-index: 10000;            opacity: 0;            pointer-events: none;            -webkit-transition: opacity 0.15s linear;            transition: opacity 0.15s linear;            width: 40px;            height: 40px;            background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEYAAABGCAYAAABxLuKEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyhpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjcwQkFBNjYzMUQ3MTFFNThBNkNGRjNGQ0FDRjdDRTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NkQ4MzBDNkUzMUU1MTFFNThBNkNGRjNGQ0FDRjdDRTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCNzBCQUE2NDMxRDcxMUU1OEE2Q0ZGM0ZDQUNGN0NFNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCNzBCQUE2NTMxRDcxMUU1OEE2Q0ZGM0ZDQUNGN0NFNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Por//6UAAAaISURBVHja7JxrTBxVFMdnd3kssGCXUqhtoS1WoLZaklZoAXnVACKSkGgiiTUBorViKATapCE0JE3DN9JGIRiBD1QeqYUgBJVHVERbUAPEUAuV1wKFKhYoIuVRwHPas7iBXfY5M/v6J/8PZHbuzPy499xz79w7AoZbuYLdwNvAz5DFYFsyapm8AH5IngH/DZ7i6kYFLJdvD94H3gPeBXbQs7xH4HHwGFhG8EwGDJbpCfYDe4GFLN37KngE3AseBa8ZKxgEcADsT02FS2FT6wb3EzCjAYNNJZhiBp/CePQTNTW9JNLzfCdwGDiAgijfwnt4HiwF/0lBnHMw+8Gx1MsYm6QU42bB01yBwXOCwMcNUOPYFN6bN9WicW2Ds0iHqvoaXdBU5A7eTd37YzbAYDx5w0ibjjpJwHvBw5rGHZEWUOKNoNfRNzBjXBzSBI5IwwIRigtj+rKnmjOgrlmpA4NJ2+vg7Yz5CP/Rz4LvbhWQ1YEJoupnbnKi2jOqC5j91CWbq9xptD6jDRgnSt5EjHnLk8ZXS5qOlV7VNldZW1v71BieVCAQnNbyFByhf6MsuCobEHozliOcGtmnrsbg32/xMG3AtzDOfKHYS22MIc+BX2AsT2KasphSBeYko//0o6kKs/rflcUYjNCufN1VbW1tTE1NTTSPYFwp3myqMS/zBaaysvLkm6CDID8/v/nq6uohvjo1Gkutg7Fjns7ECbm+k9LS0ldOnTr1trwjOHz48CEvL6+Zurq6EZ6a023wihzMAT5S/6KiouMpKSnvQu6h2DsK/P39X/Tw8HjQ0NAwxvEtCSkIP5CDOcp1F52fn380NTU1GZgI6+vrv/T19cWpSAZg1Pn4+PgdO3bsiIuLy0RTU9MEDzVnQEhVeBeXV83Lyzty9uzZJ1AaGxsb4uPjv5Ifi4uLa2hubv4aj6Wnp6dcunTpJY6hIAuBkAKuHVdXzcnJOXT+/Pn3hUKhTWtra0tMTEzdxt9ERUXVtrW1teBvLly4cDo7O/sgh2CQhSuC2cHVFc+dO+dz8eLFD/CB29vbv4+MjLyh6rfh4eE3Ojo6fhCJRDa5ubkfZmZm+nAIZ4eQqy4a4on35cuXP7KxsbHr7Oy8GRwcXLW6uqpyogiPBQUFVXR1dd3Ec6D5pZ45c4arMZwUwbA+ZZmcnLwXgm2ara2tfU9Pzy/wwNe2gqII58SJE9fgnF/hXPGVK1fSkpKSvLjothGMhM0rJCYm7i4oKEizs7Nz6O3t7QoMDCxdXFzU+P0y/hbglPb19XVjGYWFhWlYJstgJEKGxVerCQkJO0tKSjLEYrGkv7+/B6AUz8/Pa/3SfW5ubiUgIOCzgYGB21CWc3FxcTr0ZB5sDioRjC0bJcfGxrqXlZWlOzg4OA8PD/dC8ymanZ19rGt5eG5ISEiRTCbrc3R0dCkvL8+Ijo5m6x2XLStgQkNDpVVVVekSiUQ6NjbWD02hYHJyclnfcu/fv78EgAvu3bs3gGVfv349A2BJ2QJjcMF/8z1nZ+ftExMTw2FhYZ/gAxmq7PHx8UUA/zGUKYPM2K2ioiKFrbHBsqELhXzlc2g+dyIiIq4ODg4+MnT5WCbkQFexiWZlZVWwwGUZhwPvgB35niWST6brMJnNhuaxxiwwVm3UAoKZs3LYnCEgmFkrh016iGCmrBw2aRrBTFo5bNKkvMYsWVmsC1lMIRgc5Y5befyfQyITeeYrs/JYl0ye+aLwXcqKlckTBkOKYLBdDVu5PGGwpAgGddfKhflDcRAp16iF5zT47CPKwKC6LRhM98ZpB0Xh+tcZC4QyQ8+uEgzmNLcsEMzPzIY1v8pm8DDWDFoQlBFlPbKqqc1bFjJMwGf8UdmBrbb+4U6xCDMH851iF60okZruCxdCu5kpFNx926XqoLqV37hwZw8BMif9BW5h9NhksUaBaR9jHJtBDSFcMdXAqHk7oslegccEB5ei2Zs4lH/A9czTHf+MvmAYootwPE245sxQTflXkx9rs7tkibLDnQzLKyRYEO7BxuVs85qeoO22G2xW/dSk3E0ECi5P/ZbR8o2rLvuR1ig7nqYey1j3NC1RnvIbo8MHMfR5qGmqPdiVS40MCs7CNVET0kkiA/xXBukG3I0gMD+kWtKl75DGUM0A32beoe5wGw+AsMfpALcRHL1l/bAOh2AUJaasGRcTGupTTBM0VMG8yqQ+xbSVVH28C1dj21AtWKb4sMzw+PGu/wQYALnL4NVgztDmAAAAAElFTkSuQmCC) no-repeat;            background-size: contain;        }            .mk-gotop-active {            opacity: 1;            pointer-events: auto;        }"};a.extend(d.prototype,{_init:function(){c(this.options.style);var b=this,d=b.options;d.trigger||(d.trigger=a('<div class="mk-gotop"></div>').appendTo("body")),d.position&&a(d.trigger).css({bottom:d.position.bottom,right:d.position.right}),a(d.trigger).on("click",function(a){a.preventDefault(),window.scrollTo(0,0),d.onClick&&d.onClick.call(b,a)}),b._EventHandler=a(window).on("scroll touchend",function(){b._check()})},_check:function(){var b=this;e(function(){var c=a("body").scrollTop(),d=window.innerHeight;c>d?b.show():b.hide()})},destroy:function(){a(window).off({type:this._EventHandler}),a(this.trigger).remove()},show:function(){a(this.options.trigger).addClass("mk-gotop-active")},hide:function(){a(this.options.trigger).removeClass("mk-gotop-active")}}),a.fn.gotop=function(a){return a||(a={}),a.trigger=this,new d(a)},b.goTop=d}(Zepto,window.lib||(window.lib={}));
!function(a,b){function c(a){this.string=a.toString()}b.env=b.env||{},c.prototype.toString=function(){return this.string},c.prototype.valueOf=function(){for(var b=this.toString().split("."),c=[],d=0;d<b.length;d++){var e=parseInt(b[d],10);a.isNaN(e)&&(e=0);var f=e.toString();f.length<5&&(f=Array(6-f.length).join("0")+f),c.push(f),1===c.length&&c.push(".")}return a.parseFloat(c.join(""))},c.prototype.gt=function(a){return c.compare(this,a)>0},c.prototype.gte=function(a){return c.compare(this,a)>=0},c.prototype.lt=function(a){return c.compare(this,a)<0},c.prototype.lte=function(a){return c.compare(this,a)<=0},c.prototype.eq=function(a){return 0===c.compare(this,a)},c.compare=function(b,c){b=b.toString().split("."),c=c.toString().split(".");for(var d=0;d<b.length||d<c.length;d++){var e=parseInt(b[d],10),f=parseInt(c[d],10);if(a.isNaN(e)&&(e=0),a.isNaN(f)&&(f=0),f>e)return-1;if(e>f)return 1}return 0},b.version=function(a){return new c(a)}}(window,window.lib||(window.lib={})),function(a,b){b.env={init:function(a){a=a||{},this._params(),this._os(),this._browser(),this._app()},_app:function(){var c,d=this,e=a.navigator.userAgent;this.app_name;if(c=e.match(/MicroMessenger\/([\d\.]+)/))d.app={name:"Weixin",isWeixin:!0,version:c[1]};else if(c=e.match(/__weibo__([\d\.]+)/))d.app={name:"Weibo",isWeibo:!0,version:c[1]};else if(c=e.match(/Mockuai\/([\d\.]+)/)){var f,g=e.match(/ServerVersion\/([\d\.]+)/);g&&(f=g[1]),b.env.app={name:"Mockuai",isMockuai:!0,version:c[1],serverVersion:f||"-1"}}else d.app={name:"unknown",version:"0.0.0"};b.version&&(d.app.version=b.version(d.app.version)),"unknown"==d.app.name||d.app.isWeixin||d.app.isVecn||d.app.isWeibo||(b.env.husorApp={appname:b.env.app.name,platform:b.env.os.name,version:b.env.app.version})},_browser:function(){var c,d=this,e=a.navigator.userAgent;(c=e.match(/(?:UCWEB|UCBrowser\/)([\d\.]+)/))?d.browser={name:"UC",isUC:!0,version:c[1]}:(c=e.match(/MQQBrowser\/([\d\.]+)/))?d.browser={name:"QQ",isQQ:!0,version:c[1]}:(c=e.match(/MiuiBrowser\/([\d\.]+)/))?d.browser={name:"Xiaomi",isXiaomi:!0,version:c[1]}:(c=e.match(/(?:Chrome|CriOS)\/([\d\.]+)/))?d.browser={name:"Chrome",isChrome:!0,version:c[1]}:e.match(/Mobile Safari/)&&(c=e.match(/Android[\s\/]([\d\.]+)/))?d.browser={name:"Android",isAndroid:!0,version:c[1]}:e.match(/iPhone|iPad|iPod/)?e.match(/Safari/)?(c=e.match(/Version\/([\d\.]+)/),d.browser={name:"Safari",isSafari:!0,version:c[1]}):(c=e.match(/OS ([\d_\.]+) like Mac OS X/),d.browser={name:"iOS Webview",isWebview:!0,version:c[1].replace(/\_/,".")}):d.browser={name:"unknown",version:"0.0.0"},b.version&&(d.browser.version=b.version(d.browser.version))},_os:function(){var c,d=this,e=a.navigator.userAgent;if(c=e.match(/Android[\s\/]([\d\.]+)/))d.os={name:"Android",isAndroid:!0,version:c[1]};else if(c=e.match(/(iPhone|iPad|iPod)/)){var f=c[1];c=e.match(/OS ([\d_\.]+) like Mac OS X/),d.os={name:f,isIPhone:"iPhone"===f||"iPod"===f,isIPad:"iPad"===f,isIOS:!0,version:c[1].split("_").join(".")}}else d.os={name:"unknown",version:"0.0.0"};b.version&&(d.os.version=b.version(d.os.version))},_params:function(){var b=this,c=a.location.search.replace(/^\?/,"");if(b.params={},c)for(var d=c.split("&"),e=0;e<d.length;e++){d[e]=d[e].split("=");try{b.params[d[e][0]]=decodeURIComponent(d[e][1])}catch(f){b.params[d[e][0]]=d[e][1]}}}},$(function(){b.env.init()})}(window,window.lib||(window.lib={}));
!function(a,b){function c(a){var b={};Object.defineProperty(this,"params",{set:function(a){if("object"==typeof a){for(var c in b)delete b[c];for(var c in a)b[c]=a[c]}},get:function(){return b},enumerable:!0}),Object.defineProperty(this,"search",{set:function(a){if("string"==typeof a){0===a.indexOf("?")&&(a=a.substr(1));var c=a.split("&");for(var d in b)delete b[d];for(var e=0;e<c.length;e++){var f=c[e].split("=");if(f[0])try{b[decodeURIComponent(f[0])]=decodeURIComponent(f[1]||"")}catch(g){b[f[0]]=f[1]||""}}}},get:function(){var a=[];for(var c in b)if(b[c])try{a.push(encodeURIComponent(c)+"="+encodeURIComponent(b[c]))}catch(d){a.push(c+"="+b[c])}else try{a.push(encodeURIComponent(c))}catch(d){a.push(c)}return a.length?"?"+a.join("&"):""},enumerable:!0});var c;Object.defineProperty(this,"hash",{set:function(a){a&&a.indexOf("#")<0&&(a="#"+a),c=a||""},get:function(){return c},enumerable:!0}),this.set=function(a){a=a||"";var b;if(!(b=a.match(new RegExp("^("+d.join("|")+"):[/]{2}(?:([^@/:?]+)(?::([^@/:]+))?@)?([^:/?#]+)(?:[:]([0-9]+))?([/][^?#;]*)?(?:[?]([^?#]*))?(#[^#]*)?$","i"))))throw new Error("Wrong uri scheme.");this.protocal=b[1],this.username=b[2]||"",this.password=b[3]||"",this.hostname=this.host=b[4],this.port=b[5]||"",this.pathname=b[6]||"/",this.search=b[7]||"",this.hash=b[8]||"",this.origin=this.protocal+"://"+this.hostname},this.toString=function(){var a=this.protocal+"://";return this.username&&(a+=this.username,this.password&&(a+=":"+this.password),a+="@"),a+=this.host,this.port&&"80"!==this.port&&(a+=":"+this.port),this.pathname&&(a+=this.pathname),this.search&&(a+=this.search),this.hash&&(a+=this.hash),a},a&&this.set(a.toString())}var d=["http","https","taobao","taobaowebview","taobaohd","tmall","kddcpublic"];b.httpurl=c}(window,window.lib||(window.lib={}));
!function(a,b){function c(a,b){var c=new g(location.href),d=f.getElementById("buried");for(var e in c.params)a.params.hasOwnProperty(e)||(a.params[e]=c.params[e]);if(d&&(a.params.ttid=d.value),"object"==typeof b)for(var e in b)a.params[e]=b[e];return a}function d(a){j||(j=f.createElement("iframe"),j.id="callapp_iframe_"+Date.now(),j.frameborder="0",j.style.cssText="display:none;border:0;width:0;height:0;",f.body.appendChild(j)),j.src=a}function e(a,b){b.replace!==!1&&b.replace===!0?location.replace(a):location.href=a}var f=a.document,g=b.httpurl,h=b.env.os,i=(b.env.params,b.env.browser);b.callapp={};var j;b.callapp.gotoPage=function(a,b){b=b||{},"undefined"==typeof b.params&&(b.params=!0);a||location.href;a=new g(a);var e=window.navigator.userAgent.toLowerCase();if(e.match(/MobileVecn/i)&&a.indexOf("brandcate-")>=0){var f="http://"+location.host,j=a.params.title?"&"+a.params.title:"";f+"/list.html?brandId="+a.params.brandId+j}("http"===a.protocal||"https"===a.protocal)&&(a.protocal="vecn"),"vecn"===a.protocal&&b.params&&c(a,b.params),h.isAndroid&&h.version.lt("4.5")&&i.isChrome&&!i.isWebview&&(a.hash="Intent;scheme="+a.protocal+";package="+b["package"]+";end",a.protocal="intent"),d(a.toString());var k=+new Date;setTimeout(function(){!window.document.webkitHidden&&setTimeout(function(){if(+new Date-k<1200){var a=window.navigator.userAgent.toLowerCase();if(a.match(/MicroMessenger/i))var b="http://a.app.qq.com/o/simple.jsp?pkgname=com.geetion.vecn";else var b=h.isIPhone?"https://itunes.apple.com/us/app/wei-yi-you-pin/id912303412?l=zh&ls=1&mt=8":h.isAndroid?"http://h5.ve.cn/downloadapp/index.php":"";window.location=b}},500)},500)},b.callapp.download=function(a,b){b=b||{},a||(a=h.isIPhone?"https://itunes.apple.com/us/app/wei-yi-you-pin/id912303412?l=zh&ls=1&mt=8":h.isAndroid?"http://www.ve.cn/download-downloadapp.html#f=download_app&md=download":""),a=new g(a),h.isAndroid&&a.pathname.match(/\.apk$/)?(a.search="",a.hash=""):b.params&&c(a,b.params),a=a.toString(),e(a,b)}}(window,window.lib||(window.lib={}));
!function(a,b){b.deliver={init:function(){var a=new b.httpurl(location.href);this.hostName=a.origin,this.params=a.params,this.code=this.params._code_||"",this.code&&this.addEvent()},addEvent:function(){var b=this;a("body").on("click","a",function(c){c.preventDefault();var d=a(this),e=d[0].href,f=e&&-1==e.toLowerCase().indexOf("javascript")?e:"";b.deliverUrl(f)})},deliverUrl:function(a){if(a)if(-1==a.indexOf("http://")&&(a=[location.protocol,"//",location.host,location.pathname.replace(/(.*)\/([^\/]*)/,"$1/"),a].join("")),this.code){var c=new b.httpurl(a);c.params._code_=this.code,location.href=c.toString()}else location.href=a}},a(function(){b.deliver.init()})}(Zepto,window.lib||(window.lib={}));
!function(a,b){var c,d={prefix:"",setPrefix:function(a){this.prefix=a},_key:function(a){return this.prefix+a},get:function(a){return this.getItem(this._key(a))},set:function(a,b,c,d,e,f){var g=this;if(c=c||604800,d=d||"/",!e){var h=location.hostname;if(!h.match(/\d+\.\d+\.\d+\.\d+/)){var i=/.+\.([^\.]+\.[^\.]+)$/,j=h.match(i);j&&j[0]&&(e=j[0])}}return this.setItem(g._key(a),b,c,d,e,f)},rm:function(a,b,c){var d=this;if(b=b||"/",c)this.removeItem(d._key(a),b,c);else{var e=location.hostname;if(!e.match(/\d+\.\d+\.\d+\.\d+/)){var f=/.+\.([^\.]+\.[^\.]+)$/,g=e.match(f);g&&g[1]&&(this.removeItem(d._key(a),b),this.removeItem(d._key(a),b,g[0]),this.removeItem(d._key(a),b,g[1]))}}},getItem:function(a){if(!a)return null;for(var b=a+"=",c=document.cookie.split(";"),d=0;d<c.length;d++){for(var e=c[d],f="";" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(b)&&(f=e.substring(b.length,e.length)),f)return f}return null},setItem:function(a,b,c,d,e,f){if(!a||/^(?:expires|max\-age|path|domain|secure)$/i.test(a))return!1;var g="";if(c)switch(c.constructor){case Number:g=c===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c;break;case String:g="; expires="+c;break;case Date:g="; expires="+c.toUTCString()}return document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+g+(e?"; domain="+e:"")+(d?"; path="+d:"")+(f?"; secure":""),!0},removeItem:function(a,b,c){return this.hasItem(a)?(document.cookie=encodeURIComponent(a)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(c?"; domain="+c:"")+(b?"; path="+b:""),!0):!1},hasItem:function(a){return a?new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie):!1},keys:function(){for(var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),b=a.length,c=0;b>c;c++)a[c]=decodeURIComponent(a[c]);return a}},e=function(){var a={isLocalStorageOk:!1,prefix:"",data:{},init:function(){return this.checkLocalStorage(),this.setMethod(),this},checkLocalStorage:function(){if("localStorage"in window&&null!==window.localStorage)try{window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),this.isLocalStorageOk=!0}catch(a){console.log()}},setPrefix:function(a){this.prefix=a},setMethod:function(a){a=a||"",c=this.isLocalStorageOk?"cookie"==a?d:window.localStorage:d},set:function(a,b){this.data[a]=b,"object"==typeof b&&(b=JSON.stringify(b)),c.setItem(this.prefix+a,b)},get:function(a){var b=this.data[a];if("undefined"==typeof b){b=c.getItem(this.prefix+a);try{b=JSON.parse(b)}catch(d){}}return b},rm:function(a){a&&(a=this.prefix+a,c.removeItem(a))}};return a.init()}();b.storage=e,b.cookie=d}(window,window.lib||(window.lib={}));
!function(a,b){var c={getParamsFromUrl:function(){for(var a={},b=window.location.search.substring(1),c=b.split("&"),d=0;d<c.length;d++){var e=c[d].split("=");if("undefined"==typeof a[e[0]])a[e[0]]=e[1];else if("string"==typeof a[e[0]]){var f=[a[e[0]],e[1]];a[e[0]]=f}else a[e[0]].push(e[1])}return a},getUserInfo:function(a){b.api.get({api:"user/current_user/get",data:{access_token:b.cookie.get("access_token")},success:function(a){b.cookie.set("user_id",a.data.user.id),b.cookie.set("invitation_code",a.data.user.invitation_code)},error:function(a){console.log(a)},complete:function(){a&&a()}})}};b.WXLogin={params:null,init:function(a){if(this.APPID=a.APPID,this.wx_domain=a.wx_domain,b.notification&&b.notification.msg("微信自动登录中...").show(),this.isWX()){var a=a||{};return this.wxCode=this.getCode()||"",this.wxCode?this.login(a.callback):this.requestAuth(),this}},isWX:function(){var a=window.navigator.userAgent;return a.match(/MicroMessenger\/([\d\.]+)/)?!0:!1},getQuery:function(){if(!location.search)return{};var a=location.search.slice(1).split("&"),b={};return a.forEach(function(a){var c=a.split("=");b[c[0]]=c[1]}),b},getCode:function(){return this.params||(this.params=this.getQuery()),this.params.code},requestAuth:function(){var a=this,b=a.APPID,c=encodeURIComponent(a.wx_domain+"/wxcode.php?redirectUri="+encodeURIComponent(location.href)),d="snsapi_userinfo",e="mk1234",f="https://open.weixin.qq.com/connect/oauth2/authorize?appid="+b+"&redirect_uri="+c+"&response_type=code&scope="+d+"&state="+e+"&connect_redirect=1#wechat_redirect";location.replace(f)},login:function(a){b.api.post({api:"user/wechat/login",data:{auth_code:this.wxCode},success:function(b){a&&a(b)},error:function(a){a&&a.msg&&alert(a.msg),console.error(a)},complete:function(){}})}},b.login={isLogin:function(){return!!b.cookie.get("access_token")},goLogin:function(a,c){a=a||location.href,b.cookie.set("access_token","");var c=c||!1,d=!c&&b.WXLogin.isWX()?"/wx-login.html":"/login.html";location.href=d+"?redirectUrl="+encodeURIComponent(a)},logout:function(a){a=a||"",b.cookie.set("access_token",""),b.cookie.set("session_token",""),b.cookie.set("refresh_token",""),b.cookie.set("invitation_code",""),b.cookie.set("precode","");var c=this;setTimeout(function(){c.goLogin(a,!0)},100)},login:function(a,d,e,f){if(a&&a.data.access_token){if(!e){var g=c.getParamsFromUrl();e=g.redirectUrl?decodeURIComponent(g.redirectUrl):"index.html"}b.cookie.set("access_token",a.data.access_token),b.cookie.set("refresh_token",a.data.refresh_token),b.cookie.set("bind_mark",a.data.bind_mark),b.storage.set("cartName",""),c.getUserInfo(function(){f&&f.call(),setTimeout(function(){location.replace(e)},100)})}},syncAppLogin:function(a){navigator.userAgent.match(/Mockuai\/([\d\.]+)/)?b.api.get({needLogin:!0,api:"auth/refresh_token/get",success:function(c){c.data&&c.data.refresh_token&&b.cookie.set("refresh_token",c.data.refresh_token),a.call()},error:function(){a.call()}}):a.call()},getUserName:function(){return b.storage.get("userName")}}}(window,window.lib||(window.lib={}));
!function(a,b){function c(a){if(null===a||"undefined"==typeof a)return"";var b,c,d=a+"",e="",f=0;b=c=0,f=d.length;for(var g=0;f>g;g++){var h=d.charCodeAt(g),i=null;if(128>h)c++;else if(h>127&&2048>h)i=String.fromCharCode(h>>6|192,63&h|128);else if(55296!=(63488&h))i=String.fromCharCode(h>>12|224,h>>6&63|128,63&h|128);else{if(55296!=(64512&h))throw new RangeError("Unmatched trail surrogate at "+g);var j=d.charCodeAt(++g);if(56320!=(64512&j))throw new RangeError("Unmatched lead surrogate at "+(g-1));h=((1023&h)<<10)+(1023&j)+65536,i=String.fromCharCode(h>>18|240,h>>12&63|128,h>>6&63|128,63&h|128)}null!==i&&(c>b&&(e+=d.slice(b,c)),e+=i,b=c=g+1)}return c>b&&(e+=d.slice(b,f)),e}function d(a){var b,d,e,f,g,h,i,j,k,l,m=function(a,b){return a<<b|a>>>32-b},n=function(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f},o=function(a,b,c){return a&b|~a&c},p=function(a,b,c){return a&c|b&~c},q=function(a,b,c){return a^b^c},r=function(a,b,c){return b^(a|~c)},s=function(a,b,c,d,e,f,g){return a=n(a,n(n(o(b,c,d),e),g)),n(m(a,f),b)},t=function(a,b,c,d,e,f,g){return a=n(a,n(n(p(b,c,d),e),g)),n(m(a,f),b)},u=function(a,b,c,d,e,f,g){return a=n(a,n(n(q(b,c,d),e),g)),n(m(a,f),b)},v=function(a,b,c,d,e,f,g){return a=n(a,n(n(r(b,c,d),e),g)),n(m(a,f),b)},w=function(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=new Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g},x=function(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d},y=[],z=7,A=12,B=17,C=22,D=5,E=9,F=14,G=20,H=4,I=11,J=16,K=23,L=6,M=10,N=15,O=21;for(a=c(a),y=w(a),i=1732584193,j=4023233417,k=2562383102,l=271733878,b=y.length,d=0;b>d;d+=16)e=i,f=j,g=k,h=l,i=s(i,j,k,l,y[d+0],z,3614090360),l=s(l,i,j,k,y[d+1],A,3905402710),k=s(k,l,i,j,y[d+2],B,606105819),j=s(j,k,l,i,y[d+3],C,3250441966),i=s(i,j,k,l,y[d+4],z,4118548399),l=s(l,i,j,k,y[d+5],A,1200080426),k=s(k,l,i,j,y[d+6],B,2821735955),j=s(j,k,l,i,y[d+7],C,4249261313),i=s(i,j,k,l,y[d+8],z,1770035416),l=s(l,i,j,k,y[d+9],A,2336552879),k=s(k,l,i,j,y[d+10],B,4294925233),j=s(j,k,l,i,y[d+11],C,2304563134),i=s(i,j,k,l,y[d+12],z,1804603682),l=s(l,i,j,k,y[d+13],A,4254626195),k=s(k,l,i,j,y[d+14],B,2792965006),j=s(j,k,l,i,y[d+15],C,1236535329),i=t(i,j,k,l,y[d+1],D,4129170786),l=t(l,i,j,k,y[d+6],E,3225465664),k=t(k,l,i,j,y[d+11],F,643717713),j=t(j,k,l,i,y[d+0],G,3921069994),i=t(i,j,k,l,y[d+5],D,3593408605),l=t(l,i,j,k,y[d+10],E,38016083),k=t(k,l,i,j,y[d+15],F,3634488961),j=t(j,k,l,i,y[d+4],G,3889429448),i=t(i,j,k,l,y[d+9],D,568446438),l=t(l,i,j,k,y[d+14],E,3275163606),k=t(k,l,i,j,y[d+3],F,4107603335),j=t(j,k,l,i,y[d+8],G,1163531501),i=t(i,j,k,l,y[d+13],D,2850285829),l=t(l,i,j,k,y[d+2],E,4243563512),k=t(k,l,i,j,y[d+7],F,1735328473),j=t(j,k,l,i,y[d+12],G,2368359562),i=u(i,j,k,l,y[d+5],H,4294588738),l=u(l,i,j,k,y[d+8],I,2272392833),k=u(k,l,i,j,y[d+11],J,1839030562),j=u(j,k,l,i,y[d+14],K,4259657740),i=u(i,j,k,l,y[d+1],H,2763975236),l=u(l,i,j,k,y[d+4],I,1272893353),k=u(k,l,i,j,y[d+7],J,4139469664),j=u(j,k,l,i,y[d+10],K,3200236656),i=u(i,j,k,l,y[d+13],H,681279174),l=u(l,i,j,k,y[d+0],I,3936430074),k=u(k,l,i,j,y[d+3],J,3572445317),j=u(j,k,l,i,y[d+6],K,76029189),i=u(i,j,k,l,y[d+9],H,3654602809),l=u(l,i,j,k,y[d+12],I,3873151461),k=u(k,l,i,j,y[d+15],J,530742520),j=u(j,k,l,i,y[d+2],K,3299628645),i=v(i,j,k,l,y[d+0],L,4096336452),l=v(l,i,j,k,y[d+7],M,1126891415),k=v(k,l,i,j,y[d+14],N,2878612391),j=v(j,k,l,i,y[d+5],O,4237533241),i=v(i,j,k,l,y[d+12],L,1700485571),l=v(l,i,j,k,y[d+3],M,2399980690),k=v(k,l,i,j,y[d+10],N,4293915773),j=v(j,k,l,i,y[d+1],O,2240044497),i=v(i,j,k,l,y[d+8],L,1873313359),l=v(l,i,j,k,y[d+15],M,4264355552),k=v(k,l,i,j,y[d+6],N,2734768916),j=v(j,k,l,i,y[d+13],O,1309151649),i=v(i,j,k,l,y[d+4],L,4149444226),l=v(l,i,j,k,y[d+11],M,3174756917),k=v(k,l,i,j,y[d+2],N,718787259),j=v(j,k,l,i,y[d+9],O,3951481745),i=n(i,e),j=n(j,f),k=n(k,g),l=n(l,h);var P=x(i)+x(j)+x(k)+x(l);return P.toLowerCase()}function e(a){var b,c={},d=[];for(b in a)a.hasOwnProperty(b)&&d.push(b);for(d.sort(),b=0;b<d.length;b++)c[d[b]]=a[d[b]];return c}function f(a){var c=b.api.app_pwd;a=e(a);var f=c;for(var g in a)f+=g+"="+a[g]+"&";f=f.slice(0,-1),f+=c;var h=d(f);return h}function g(a,c){if(a&&b.cookie.set("session_token",""),b.api.session_token=b.cookie.get("session_token"),b.api.session_token)c&&c();else{var d={format:"json",app_key:b.api.app_key,timestamp:Math.floor(Date.now()/1e3)};$.getJSON(k.apiUrl+"auth/session_token/get?format=json&app_key="+d.app_key+"&timestamp="+d.timestamp+"&api_sign="+f(d),function(a){b.api.session_token=a.data.session_token,b.cookie.set("session_token",b.api.session_token),c&&c()})}}function h(a){var c={format:"json",app_key:b.api.app_key,timestamp:Math.floor(Date.now()/1e3),refresh_token:b.cookie.get("refresh_token"),access_token:b.cookie.get("access_token"),session_token:b.cookie.get("session_token")},d="";d=b.api.testApi?b.api.testApi+"auth/access_token/refresh?format=json&app_key="+c.app_key+"&timestamp="+c.timestamp+"&refresh_token="+c.refresh_token+"&access_token="+c.access_token+"&session_token="+c.session_token+"&api_sign="+f(c):k.sslApiUrl+"auth/access_token/refresh?format=json&app_key="+c.app_key+"&timestamp="+c.timestamp+"&refresh_token="+c.refresh_token+"&access_token="+c.access_token+"&session_token="+c.session_token+"&api_sign="+f(c),b.cookie.set("access_token",""),$.ajax({type:"post",url:d,data:c,dataType:"json",success:function(c){return 50006==c.code||50004==c.code?void(b.notification?b.notification.alert("当前登录信息已失效，请重新登录",function(){b.login&&b.login.goLogin()}).show():(alert("当前登录信息已失效，请重新登录"),b.login&&b.login.goLogin())):(b.cookie.set("access_token",c.data.access_token),void(a&&a()))},error:function(a){},complete:function(){}})}function i(a,c){switch(c.code){case 1e4:a.success&&a.success(c);break;case 50001:case 50002:if(b.api.needSessionToken)return void b.api.requestQueue.push(a.fn);b.api.needSessionToken=!0,g(!0,function(){a.fn.call(),b.api.needSessionToken=!1,b.api.callRequestQueue()});break;case 50003:case 50004:if(b.api.needAccessToken)return void b.api.requestQueue.push(a.fn);b.api.needAccessToken=!0,h(function(){a.fn.call(),b.api.needAccessToken=!1,b.api.callRequestQueue()});break;case 50005:case 50006:a.login?a.login():(alert("登陆失效，请重新登陆"),b.login&&b.login.goLogin());break;default:a.error&&a.error(c)}}function j(a,c){if(a.mock){var d=a.mock;return void $.getJSON(d.path,function(b){d.error?a.error&&a.error(b):a.success&&a.success(b),a.complete&&a.complete()})}var e=$.extend(!0,{},a.data);e.format="json",e.app_key=b.api.app_key,e.timestamp=Math.floor(Date.now()/1e3),e.session_token=b.cookie.get("session_token"),e.access_token=b.cookie.get("access_token"),e.api_sign=f(e),$.extend(!0,e);var g=a.ssl?k.sslApiUrl:k.apiUrl;$.ajax({url:g+a.api,type:c,data:e,dataType:"json",contentType:"application/x-www-form-urlencoded; charset=utf-8",success:function(b){i(a,b)},error:function(b,c,d){a.error&&a.error(b,c,d)},complete:function(b,c){a.complete&&a.complete(b,c)}})}var k=function(){var a=location.href,b="",c="",d="";return-1!=a.indexOf("online.m.feed.9t2.net")||-1!=a.indexOf("http://m.feed.9t2.net")||-1!=a.indexOf("isonline")?(d="online",b="https://api.feed.9t2.net/"):-1!=a.indexOf("test.m.feed.9t2.net")||-1!=a.indexOf("istest")?(d="test",b="http://test.api.feed.9t2.net/"):-1!=a.indexOf("rc.m.feed.9t2.net")||-1!=a.indexOf("isrc")?(d="rc",b="http://rc.api.feed.9t2.net/"):(d="dev",b="https://api.feed.9t2.net/"),b="https://api.feed.9t2.net/",c="https://api.feed.9t2.net/",{apiUrl:b,sslApiUrl:c,platform:d}}();b.md5=d,b.api={needSessionToken:!1,needAccessToken:!1,requestQueue:[],init:function(a){this.app_key=a.app_key,this.app_pwd=a.app_pwd,a.testApi&&(k.apiUrl=a.testApi,k.sslApiUrl=a.testApi,this.testApi=a.testApi)},verify:function(a){return b.cookie?a?b.login?b.login.isLogin()?!this.needSessionToken&&!this.needAccessToken:void b.login.goLogin():void console.error("lib.login 必须先加载"):!this.needSessionToken:void console.error("lib.cookie 必须先加载")},get:function(a){var b=function(){j(a,"GET")};a.fn=b,this.verify(a.needLogin)?g(!1,b):this.requestQueue.push(b)},post:function(a){var b=function(){j(a,"POST")};a.fn=b,this.verify(a.needLogin)?g(!1,b):this.requestQueue.push(b)},callRequestQueue:function(){for(var a=this.requestQueue,b=0,c=a.length;c>b;b++)a[b].call();this.requestQueue=[]}}}(window,window.lib||(window.lib={}));

//     Underscore.js 1.7.0
//     http://underscorejs.org
//     (c) 2009-2014 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.
(function(){var n=this,t=n._,r=Array.prototype,e=Object.prototype,u=Function.prototype,i=r.push,a=r.slice,o=r.concat,l=e.toString,c=e.hasOwnProperty,f=Array.isArray,s=Object.keys,p=u.bind,h=function(n){return n instanceof h?n:this instanceof h?void(this._wrapped=n):new h(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=h),exports._=h):n._=h,h.VERSION="1.7.0";var g=function(n,t,r){if(t===void 0)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}};h.iteratee=function(n,t,r){return null==n?h.identity:h.isFunction(n)?g(n,t,r):h.isObject(n)?h.matches(n):h.property(n)},h.each=h.forEach=function(n,t,r){if(null==n)return n;t=g(t,r);var e,u=n.length;if(u===+u)for(e=0;u>e;e++)t(n[e],e,n);else{var i=h.keys(n);for(e=0,u=i.length;u>e;e++)t(n[i[e]],i[e],n)}return n},h.map=h.collect=function(n,t,r){if(null==n)return[];t=h.iteratee(t,r);for(var e,u=n.length!==+n.length&&h.keys(n),i=(u||n).length,a=Array(i),o=0;i>o;o++)e=u?u[o]:o,a[o]=t(n[e],e,n);return a};var v="Reduce of empty array with no initial value";h.reduce=h.foldl=h.inject=function(n,t,r,e){null==n&&(n=[]),t=g(t,e,4);var u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length,o=0;if(arguments.length<3){if(!a)throw new TypeError(v);r=n[i?i[o++]:o++]}for(;a>o;o++)u=i?i[o]:o,r=t(r,n[u],u,n);return r},h.reduceRight=h.foldr=function(n,t,r,e){null==n&&(n=[]),t=g(t,e,4);var u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length;if(arguments.length<3){if(!a)throw new TypeError(v);r=n[i?i[--a]:--a]}for(;a--;)u=i?i[a]:a,r=t(r,n[u],u,n);return r},h.find=h.detect=function(n,t,r){var e;return t=h.iteratee(t,r),h.some(n,function(n,r,u){return t(n,r,u)?(e=n,!0):void 0}),e},h.filter=h.select=function(n,t,r){var e=[];return null==n?e:(t=h.iteratee(t,r),h.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e)},h.reject=function(n,t,r){return h.filter(n,h.negate(h.iteratee(t)),r)},h.every=h.all=function(n,t,r){if(null==n)return!0;t=h.iteratee(t,r);var e,u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length;for(e=0;a>e;e++)if(u=i?i[e]:e,!t(n[u],u,n))return!1;return!0},h.some=h.any=function(n,t,r){if(null==n)return!1;t=h.iteratee(t,r);var e,u,i=n.length!==+n.length&&h.keys(n),a=(i||n).length;for(e=0;a>e;e++)if(u=i?i[e]:e,t(n[u],u,n))return!0;return!1},h.contains=h.include=function(n,t){return null==n?!1:(n.length!==+n.length&&(n=h.values(n)),h.indexOf(n,t)>=0)},h.invoke=function(n,t){var r=a.call(arguments,2),e=h.isFunction(t);return h.map(n,function(n){return(e?t:n[t]).apply(n,r)})},h.pluck=function(n,t){return h.map(n,h.property(t))},h.where=function(n,t){return h.filter(n,h.matches(t))},h.findWhere=function(n,t){return h.find(n,h.matches(t))},h.max=function(n,t,r){var e,u,i=-1/0,a=-1/0;if(null==t&&null!=n){n=n.length===+n.length?n:h.values(n);for(var o=0,l=n.length;l>o;o++)e=n[o],e>i&&(i=e)}else t=h.iteratee(t,r),h.each(n,function(n,r,e){u=t(n,r,e),(u>a||u===-1/0&&i===-1/0)&&(i=n,a=u)});return i},h.min=function(n,t,r){var e,u,i=1/0,a=1/0;if(null==t&&null!=n){n=n.length===+n.length?n:h.values(n);for(var o=0,l=n.length;l>o;o++)e=n[o],i>e&&(i=e)}else t=h.iteratee(t,r),h.each(n,function(n,r,e){u=t(n,r,e),(a>u||1/0===u&&1/0===i)&&(i=n,a=u)});return i},h.shuffle=function(n){for(var t,r=n&&n.length===+n.length?n:h.values(n),e=r.length,u=Array(e),i=0;e>i;i++)t=h.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},h.sample=function(n,t,r){return null==t||r?(n.length!==+n.length&&(n=h.values(n)),n[h.random(n.length-1)]):h.shuffle(n).slice(0,Math.max(0,t))},h.sortBy=function(n,t,r){return t=h.iteratee(t,r),h.pluck(h.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||r===void 0)return 1;if(e>r||e===void 0)return-1}return n.index-t.index}),"value")};var m=function(n){return function(t,r,e){var u={};return r=h.iteratee(r,e),h.each(t,function(e,i){var a=r(e,i,t);n(u,e,a)}),u}};h.groupBy=m(function(n,t,r){h.has(n,r)?n[r].push(t):n[r]=[t]}),h.indexBy=m(function(n,t,r){n[r]=t}),h.countBy=m(function(n,t,r){h.has(n,r)?n[r]++:n[r]=1}),h.sortedIndex=function(n,t,r,e){r=h.iteratee(r,e,1);for(var u=r(t),i=0,a=n.length;a>i;){var o=i+a>>>1;r(n[o])<u?i=o+1:a=o}return i},h.toArray=function(n){return n?h.isArray(n)?a.call(n):n.length===+n.length?h.map(n,h.identity):h.values(n):[]},h.size=function(n){return null==n?0:n.length===+n.length?n.length:h.keys(n).length},h.partition=function(n,t,r){t=h.iteratee(t,r);var e=[],u=[];return h.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},h.first=h.head=h.take=function(n,t,r){return null==n?void 0:null==t||r?n[0]:0>t?[]:a.call(n,0,t)},h.initial=function(n,t,r){return a.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},h.last=function(n,t,r){return null==n?void 0:null==t||r?n[n.length-1]:a.call(n,Math.max(n.length-t,0))},h.rest=h.tail=h.drop=function(n,t,r){return a.call(n,null==t||r?1:t)},h.compact=function(n){return h.filter(n,h.identity)};var y=function(n,t,r,e){if(t&&h.every(n,h.isArray))return o.apply(e,n);for(var u=0,a=n.length;a>u;u++){var l=n[u];h.isArray(l)||h.isArguments(l)?t?i.apply(e,l):y(l,t,r,e):r||e.push(l)}return e};h.flatten=function(n,t){return y(n,t,!1,[])},h.without=function(n){return h.difference(n,a.call(arguments,1))},h.uniq=h.unique=function(n,t,r,e){if(null==n)return[];h.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=h.iteratee(r,e));for(var u=[],i=[],a=0,o=n.length;o>a;a++){var l=n[a];if(t)a&&i===l||u.push(l),i=l;else if(r){var c=r(l,a,n);h.indexOf(i,c)<0&&(i.push(c),u.push(l))}else h.indexOf(u,l)<0&&u.push(l)}return u},h.union=function(){return h.uniq(y(arguments,!0,!0,[]))},h.intersection=function(n){if(null==n)return[];for(var t=[],r=arguments.length,e=0,u=n.length;u>e;e++){var i=n[e];if(!h.contains(t,i)){for(var a=1;r>a&&h.contains(arguments[a],i);a++);a===r&&t.push(i)}}return t},h.difference=function(n){var t=y(a.call(arguments,1),!0,!0,[]);return h.filter(n,function(n){return!h.contains(t,n)})},h.zip=function(n){if(null==n)return[];for(var t=h.max(arguments,"length").length,r=Array(t),e=0;t>e;e++)r[e]=h.pluck(arguments,e);return r},h.object=function(n,t){if(null==n)return{};for(var r={},e=0,u=n.length;u>e;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},h.indexOf=function(n,t,r){if(null==n)return-1;var e=0,u=n.length;if(r){if("number"!=typeof r)return e=h.sortedIndex(n,t),n[e]===t?e:-1;e=0>r?Math.max(0,u+r):r}for(;u>e;e++)if(n[e]===t)return e;return-1},h.lastIndexOf=function(n,t,r){if(null==n)return-1;var e=n.length;for("number"==typeof r&&(e=0>r?e+r+1:Math.min(e,r+1));--e>=0;)if(n[e]===t)return e;return-1},h.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;e>i;i++,n+=r)u[i]=n;return u};var d=function(){};h.bind=function(n,t){var r,e;if(p&&n.bind===p)return p.apply(n,a.call(arguments,1));if(!h.isFunction(n))throw new TypeError("Bind must be called on a function");return r=a.call(arguments,2),e=function(){if(!(this instanceof e))return n.apply(t,r.concat(a.call(arguments)));d.prototype=n.prototype;var u=new d;d.prototype=null;var i=n.apply(u,r.concat(a.call(arguments)));return h.isObject(i)?i:u}},h.partial=function(n){var t=a.call(arguments,1);return function(){for(var r=0,e=t.slice(),u=0,i=e.length;i>u;u++)e[u]===h&&(e[u]=arguments[r++]);for(;r<arguments.length;)e.push(arguments[r++]);return n.apply(this,e)}},h.bindAll=function(n){var t,r,e=arguments.length;if(1>=e)throw new Error("bindAll must be passed function names");for(t=1;e>t;t++)r=arguments[t],n[r]=h.bind(n[r],n);return n},h.memoize=function(n,t){var r=function(e){var u=r.cache,i=t?t.apply(this,arguments):e;return h.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},h.delay=function(n,t){var r=a.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},h.defer=function(n){return h.delay.apply(h,[n,1].concat(a.call(arguments,1)))},h.throttle=function(n,t,r){var e,u,i,a=null,o=0;r||(r={});var l=function(){o=r.leading===!1?0:h.now(),a=null,i=n.apply(e,u),a||(e=u=null)};return function(){var c=h.now();o||r.leading!==!1||(o=c);var f=t-(c-o);return e=this,u=arguments,0>=f||f>t?(clearTimeout(a),a=null,o=c,i=n.apply(e,u),a||(e=u=null)):a||r.trailing===!1||(a=setTimeout(l,f)),i}},h.debounce=function(n,t,r){var e,u,i,a,o,l=function(){var c=h.now()-a;t>c&&c>0?e=setTimeout(l,t-c):(e=null,r||(o=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,a=h.now();var c=r&&!e;return e||(e=setTimeout(l,t)),c&&(o=n.apply(i,u),i=u=null),o}},h.wrap=function(n,t){return h.partial(t,n)},h.negate=function(n){return function(){return!n.apply(this,arguments)}},h.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},h.after=function(n,t){return function(){return--n<1?t.apply(this,arguments):void 0}},h.before=function(n,t){var r;return function(){return--n>0?r=t.apply(this,arguments):t=null,r}},h.once=h.partial(h.before,2),h.keys=function(n){if(!h.isObject(n))return[];if(s)return s(n);var t=[];for(var r in n)h.has(n,r)&&t.push(r);return t},h.values=function(n){for(var t=h.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=n[t[u]];return e},h.pairs=function(n){for(var t=h.keys(n),r=t.length,e=Array(r),u=0;r>u;u++)e[u]=[t[u],n[t[u]]];return e},h.invert=function(n){for(var t={},r=h.keys(n),e=0,u=r.length;u>e;e++)t[n[r[e]]]=r[e];return t},h.functions=h.methods=function(n){var t=[];for(var r in n)h.isFunction(n[r])&&t.push(r);return t.sort()},h.extend=function(n){if(!h.isObject(n))return n;for(var t,r,e=1,u=arguments.length;u>e;e++){t=arguments[e];for(r in t)c.call(t,r)&&(n[r]=t[r])}return n},h.pick=function(n,t,r){var e,u={};if(null==n)return u;if(h.isFunction(t)){t=g(t,r);for(e in n){var i=n[e];t(i,e,n)&&(u[e]=i)}}else{var l=o.apply([],a.call(arguments,1));n=new Object(n);for(var c=0,f=l.length;f>c;c++)e=l[c],e in n&&(u[e]=n[e])}return u},h.omit=function(n,t,r){if(h.isFunction(t))t=h.negate(t);else{var e=h.map(o.apply([],a.call(arguments,1)),String);t=function(n,t){return!h.contains(e,t)}}return h.pick(n,t,r)},h.defaults=function(n){if(!h.isObject(n))return n;for(var t=1,r=arguments.length;r>t;t++){var e=arguments[t];for(var u in e)n[u]===void 0&&(n[u]=e[u])}return n},h.clone=function(n){return h.isObject(n)?h.isArray(n)?n.slice():h.extend({},n):n},h.tap=function(n,t){return t(n),n};var b=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof h&&(n=n._wrapped),t instanceof h&&(t=t._wrapped);var u=l.call(n);if(u!==l.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}if("object"!=typeof n||"object"!=typeof t)return!1;for(var i=r.length;i--;)if(r[i]===n)return e[i]===t;var a=n.constructor,o=t.constructor;if(a!==o&&"constructor"in n&&"constructor"in t&&!(h.isFunction(a)&&a instanceof a&&h.isFunction(o)&&o instanceof o))return!1;r.push(n),e.push(t);var c,f;if("[object Array]"===u){if(c=n.length,f=c===t.length)for(;c--&&(f=b(n[c],t[c],r,e)););}else{var s,p=h.keys(n);if(c=p.length,f=h.keys(t).length===c)for(;c--&&(s=p[c],f=h.has(t,s)&&b(n[s],t[s],r,e)););}return r.pop(),e.pop(),f};h.isEqual=function(n,t){return b(n,t,[],[])},h.isEmpty=function(n){if(null==n)return!0;if(h.isArray(n)||h.isString(n)||h.isArguments(n))return 0===n.length;for(var t in n)if(h.has(n,t))return!1;return!0},h.isElement=function(n){return!(!n||1!==n.nodeType)},h.isArray=f||function(n){return"[object Array]"===l.call(n)},h.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},h.each(["Arguments","Function","String","Number","Date","RegExp"],function(n){h["is"+n]=function(t){return l.call(t)==="[object "+n+"]"}}),h.isArguments(arguments)||(h.isArguments=function(n){return h.has(n,"callee")}),"function"!=typeof/./&&(h.isFunction=function(n){return"function"==typeof n||!1}),h.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},h.isNaN=function(n){return h.isNumber(n)&&n!==+n},h.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===l.call(n)},h.isNull=function(n){return null===n},h.isUndefined=function(n){return n===void 0},h.has=function(n,t){return null!=n&&c.call(n,t)},h.noConflict=function(){return n._=t,this},h.identity=function(n){return n},h.constant=function(n){return function(){return n}},h.noop=function(){},h.property=function(n){return function(t){return t[n]}},h.matches=function(n){var t=h.pairs(n),r=t.length;return function(n){if(null==n)return!r;n=new Object(n);for(var e=0;r>e;e++){var u=t[e],i=u[0];if(u[1]!==n[i]||!(i in n))return!1}return!0}},h.times=function(n,t,r){var e=Array(Math.max(0,n));t=g(t,r,1);for(var u=0;n>u;u++)e[u]=t(u);return e},h.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},h.now=Date.now||function(){return(new Date).getTime()};var _={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},w=h.invert(_),j=function(n){var t=function(t){return n[t]},r="(?:"+h.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};h.escape=j(_),h.unescape=j(w),h.result=function(n,t){if(null==n)return void 0;var r=n[t];return h.isFunction(r)?n[t]():r};var x=0;h.uniqueId=function(n){var t=++x+"";return n?n+t:t},h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var A=/(.)^/,k={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},O=/\\|'|\r|\n|\u2028|\u2029/g,F=function(n){return"\\"+k[n]};h.template=function(n,t,r){!t&&r&&(t=r),t=h.defaults({},t,h.templateSettings);var e=RegExp([(t.escape||A).source,(t.interpolate||A).source,(t.evaluate||A).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,a,o){return i+=n.slice(u,o).replace(O,F),u=o+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":a&&(i+="';\n"+a+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var a=new Function(t.variable||"obj","_",i)}catch(o){throw o.source=i,o}var l=function(n){return a.call(this,n,h)},c=t.variable||"obj";return l.source="function("+c+"){\n"+i+"}",l},h.chain=function(n){var t=h(n);return t._chain=!0,t};var E=function(n){return this._chain?h(n).chain():n};h.mixin=function(n){h.each(h.functions(n),function(t){var r=h[t]=n[t];h.prototype[t]=function(){var n=[this._wrapped];return i.apply(n,arguments),E.call(this,r.apply(h,n))}})},h.mixin(h),h.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=r[n];h.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],E.call(this,r)}}),h.each(["concat","join","slice"],function(n){var t=r[n];h.prototype[n]=function(){return E.call(this,t.apply(this._wrapped,arguments))}}),h.prototype.value=function(){return this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return h})}).call(this);

!function(a,b){var c=navigator.appVersion.match(/(iPhone\sOS)\s([\d_]+)/),d=c&&c[2].split("_");d=d&&parseFloat(d.length>1?d.splice(0,2).join("."):d[0],10);var e=d&&6>d,f={defaultOpts:{loadHidden:!0,interval:200,threshold:5,errorImg:"http://img01.taojae.com/party/0834ccdcbc446e95037597fa397cd53d.png",container:null},init:function(b){this.options=a.extend(!0,{},this.defaultOpts,b),this.inited||(this.inited=!0,this.addEvent(),this.trigger())},addEvent:function(){var b=this,c=this.options;if(e){var d={},f=null;a(window).on("touchstart",function(a){d={scrollY:window.scrollY,time:Date.now()},f&&clearTimeout(f)}).on("touchend",function(a){if(a&&a.changedTouches){var e=Math.abs(window.scrollY-d.scrollY);if(e>c.threshold){var g=Date.now()-d.time;f=setTimeout(function(){b.update(),d={},clearTimeout(f),f=null},g>c.interval?0:200)}}else b.update()}).on("touchcancel",function(){f&&clearTimeout(f),d={}})}else{var g=a(b.options.container?b.options.container:window);g.on("scroll",function(){b.update()})}},trigger:function(){var b=this,c=(this.options,e&&"touchend"||"scroll");b.prevlist&&b.prevlist.each(function(a,b){b&&(b.onerror=b.onload=null)}),b.imglist=a(".lazy"),b.prevlist=a.extend({},!0,b.imglist),a(window).trigger(c)},inviewport:function(a,b){var c=window.pageYOffset,d=window.pageYOffset+window.innerHeight,e=a.offset().top;return e>=c&&d>=e+(b||-100)},update:function(){var b=this,c=this.options;b.imglist.each(function(d,e){var f=c.loadHidden?!1:a(e).is(":hidden");if(e&&b.inviewport(a(e))&&!f){var g=a(e),h=g.attr("dataimg"),i="img"===g[0].tagName.toLowerCase(),j=new Image;j.src=h,j.onload=function(){b.imglist[d]=null,g.removeClass("lazy").removeAttr("dataimg"),i?g.attr("src",h):g.css("background-image","url("+h+")"),j.onload=j.onerror=null},j.onerror=function(){b.imglist[d]=null,g.removeClass("lazy").removeAttr("dataimg"),i?g.attr("src",c.errorImg):g.css("background-image","url("+c.errorImg+")"),j.onload=j.onerror=null}}})}};b.lazyload=f}(Zepto,window.lib?window.lib:window.lib={});
/**
 * Created by huning on 16/2/25.
 */
;(function(lib) {
    //var $ = win['Zepto'];

    //bottombar相关数据
    var defaultBarData = [
        {
            text: '',
            link: '/index.html',
            icon: '&#xe606;'
        },
        {
            text: '',
            link: '/cart.html',
            icon: '&#xe604;'
        },
        {
            text: '',
            link: '/mine.html',
            icon: '&#xe607;'
        }
    ];

    var defaultCfg = {
        showBottom:true,
        host: "ushop.feed.9t2.net",
        width: '150px',
        bottom: '8px',
        left: '7px',
        callback: function(obj){
            //获取是否需要红点
            var orderNum =lib.storage.get('order_num');
            var cartNum = lib.storage.get('cart_num');
            var dot = obj.getElementsByClassName('dot');
            if(orderNum>0){
                dot[1].style.display='block';
            };
            if(cartNum>0){
                dot[0].innerText = cartNum;
                dot[0].style.display='block';
            }
        }
    };

    function renderBottomBar (cfg,host) {
        var htm = [];
        cfg.forEach(function (val) {
            htm.push('<li class="bbar">' +
                '<a href="http://'+host+ val.link + '">' +
                '<i class="icon iconfont" data-icon="' + val.icon + '">' + val.icon + '</i>' +
                '<p>' + val.text + '</p>' +
                '</a>' +
                '</li>')
        })

        var htmlText = document.createElement('div');
        htmlText.id = 'bottombar';
        htmlText.style.display='none';
        htmlText.innerHTML='<ul>' + htm.join('') + '</ul>';
        return htmlText;
    };

    // constructor
    function BottomBar(options) {
        this.options = {};
        this.options = options || defaultCfg;
        this.length = this.options.barData?this.options.barData.length:defaultBarData.length;
        this._init();
    }

    //批量添加css属性
    function addCss(obj,val){
        for(var i=0;i<(obj.length?obj.length:1);i++){
            for(j in val){
                (obj[i]?obj[i]:obj).style[j]=val[j];
            }
        }
    }

    BottomBar.prototype._init=function () {
        var that = this;
        var bodyTarget = document.getElementsByTagName('body');
        bottombar_html = this.options.barData?renderBottomBar(this.options.barData,this.options.host):renderBottomBar(defaultBarData,this.options.host);
        //显示或隐藏bottombar
        if(this.options.showBottom){
            that.addheadCss();
            bodyTarget[0].appendChild(bottombar_html);
            //添加信息
            that.addDot();
            //获取组件父元素
            var barDiv = document.getElementById('bottombar');
            //添加css
            that.addCss(barDiv)
            //显示导航
            that.show(barDiv);
            //获取数据
            if(that.options.callback&&typeof(that.options.callback)=='function'){
                that.options.callback(barDiv);
            };
        }else{
            that.hide(barDiv);
        }
    };
    BottomBar.prototype.hide=function(obj){
        obj.style.display = "none";
    };
    BottomBar.prototype.show=function(obj){
        obj.style.display = "block";
    };
    BottomBar.prototype.addCss = function(obj){
        var ulDom = obj.getElementsByTagName('ul');
        var liDom = obj.getElementsByClassName('bbar');
        var aDom = obj.getElementsByTagName('a');
        var dot = obj.getElementsByClassName('dot');
        var cir = obj.getElementsByClassName('circle');
        addCss(obj,{'width':this.options.width,'height':'37px','zIndex':'999','background':'rgba(0,0,0,.5)','borderTop':'1px solid #e5e5e5','position':'fixed','borderRadius':'5px','bottom':this.options.bottom,'left':this.options.left});
        addCss(ulDom,{'listStyle':'none','padding':'0','margin':'0'});
        addCss(liDom,{'listStyle':'none','cssFloat':'left','width':'33%','position':'relative'});
        addCss(aDom,{'color':'#fff','textDecoration':'none','display':'inline-block','width':'100%','textAlign':'center','paddingTop':'5px'});
        addCss(dot,{'display':'none','background':'#ff4b55','minWidth':'5px','height':'5px','color':'#fff','borderRadius':'18px','position':'absolute','top':'6px','right':'13px','text-align':'center','fontSize':'12px'});
        addCss(cir,{'top':'2px','right':'2px','minWidth':'18px','height':'18px','lineHeight':'18px'});
    };
    BottomBar.prototype.addheadCss=function(obj){
        var styleDom = document.createElement('style');
        var head = document.getElementsByTagName('head');
        styleDom.innerHTML+='@font-face{font-family: "iconfont";src: url("//at.alicdn.com/t/font_1440575380_8851519.eot");src: url("//at.alicdn.com/t/font_1440575380_8851519.eot?#iefix") format("embedded-opentype"),url("//at.alicdn.com/t/font_1440575380_8851519.woff") format("woff"),url("//at.alicdn.com/t/font_1440575380_8851519.ttf") format("truetype"),url("//at.alicdn.com/t/font_1440575380_8851519.svg#iconfont") format("svg");}';
        styleDom.innerHTML+='.iconfont{font-family:"iconfont" !important;font-size:26px;font-style:normal; -webkit-font-smoothing: antialiased; -webkit-text-stroke-width: 0.2px; -moz-osx-font-smoothing: grayscale;color: #fff;}'
        head[0].appendChild(styleDom);
    };
    BottomBar.prototype.addDot=function(){
        var bottombar = document.getElementById('bottombar');
        var redCircle=document.createElement('span');
        redCircle.className = 'dot circle';
        var cart=bottombar.getElementsByClassName("bbar")[1];
        cart.appendChild(redCircle);
        var redDot=document.createElement('span');
        redDot.className= 'dot';
        var user=bottombar.getElementsByClassName("bbar")[2];
        user.appendChild(redDot);
    };

    // export
    lib.ushopBottomBar = BottomBar;
    // window.onload =function(){
    //     new BottomBar({
    //         showBottom:true,
    //         host: "ushop.feed.9t2.net",
    //         width: '150px',
    //         bottom: '8px',
    //         left: '7px',
    //         callback: function(obj){
    //             //获取是否需要红点
    //             var orderNum =lib.storage.get('order_num');
    //             var cartNum = lib.storage.get('cart_num');
    //             var dot = obj.getElementsByClassName('dot');
    //             if(orderNum>0){
    //                 dot[1].style.display='block';
    //             };
    //             if(cartNum>0){
    //                 dot[0].innerText = cartNum;
    //                 dot[0].style.display='block';
    //             }
    //         }
    //     });
    // }
})(window['lib'] || (window['lib'] = {}));
!function(a,b){function c(a){var b;if("number"==typeof a)b=new Date(1e3*a);else if("string"==typeof a){var c=a.charAt(0),d="+"===c,h="-"===c;if(d||h){for(var i,j=a.substr(1),k=j.split(":"),l=[0,0,0,0],m=4;k.length&&--m>=0;)l[m]=parseInt(k.pop())||0;i=e*l[0]+f*l[1]+g*l[2]+l[3],b=new Date,b.setSeconds(b.getSeconds()+i*(h?-1:1)),b.setMilliseconds(0)}}return b||(b=new Date(a)),b}function d(a,b){return b.replace(FORMATTER_REGEXP,function(b){var c=b.length,d=b.charAt(0);if("\\"===d)return b.replace("\\","");var e=("d"===d?a.days:"h"===d?a.hours:"m"===d?a.minutes:"s"===d?a.seconds:"ms"===d?a.microSeconds:0)+"";return("00000"+e).substr(-Math.max(e.length,c))})}var e=86400,f=3600,g=60,h=.01,i=1e3,j="d天hh时mm分ss秒";FORMATTER_REGEXP=/(\\)?(dd*|hh?|mm?|ss?)/gi;var k=function(a){a=a||{};var b=this,d=c(a.endDate);if(!d||!d.getTime())throw new Error("Invalid endDate");b.endDate=d,b.onUpdate=a.onUpdate,b.onEnd=a.onEnd,b.interval=a.interval||1e3,b.stringFormatter=a.stringFormatter||j,b.correctDateOffset=a.correctDateOffset||0,b.updateElement=a.updateElement,b._data={days:0,hours:0,minutes:0,seconds:0}};k.prototype={start:function(){var a=this;return a.stop(),a._update()&&(a._intervalId=setInterval(function(){a._update()},a.interval)),a},_update:function(){var a,b=this,c=b._data,j=b.updateElement,k=+new Date+1e3*b.correctDateOffset,l=Math.max(0,Math.round(b.endDate.getTime()-k)),m=0>=l;return c.totalMicroSeconds=l,l-=(c.days=Math.floor(l/(e*i)))*e*i,l-=(c.hours=Math.floor(l/(f*i)))*f*i,l-=(c.minutes=Math.floor(l/(g*i)))*g*i,l-=(c.seconds=Math.floor(l/i))*i,c.microSeconds=Math.floor(l*h),c.stringValue=d(c,b.stringFormatter),j&&(j.innerHTML=c.stringValue),(a=b.onUpdate)&&a.call(b,c),m?(b.stop(),(a=b.onEnd)&&a.call(b),!1):!0},stop:function(){var a=this;return a._intervalId&&(clearInterval(a._intervalId),a._intervalId=null),a},setEndDate:function(a){var b=this;return b.endDate=c(a),b}},b.countdown=function(a){return new k(a)}}(window,window.lib||(window.lib={}));
!function(a,b){var c=Date.now();b.infiniteScroll={defaultOpts:{bufferPx:40,time:200,onNear:null,onScroll:null,end:null,onEnd:null},init:function(a){return a=a||{},this.options=$.extend(!0,{},this.defaultOpts,a),this.started=!1,this._addEvent(),this},remove:function(){$(window).off("scroll",this.scrollHandler),this.started=!1},start:function(){this.options;$(window).on("scroll",this.scrollHandler),this.started=!0},triggerEnd:function(){var a=this.options;this.remove(),a.onEnd&&a.onEnd()},_addEvent:function(){{var a=this;this.options}a.scrollHandler=function(){a._handler()}},_handler:function(){var a=this.options;if(a.onScroll&&"function"==typeof a.onScroll&&a.onScroll.apply(null),this._isNearBottom()){var b=Date.now()-c;b<a.time||(c=Date.now(),$.isFunction(a.onNear)&&a.onNear.apply(null),$.isFunction(a.end)&&a.end()&&this.triggerEnd())}},_isNearBottom:function(){var a=this.options,b=$(window),c=0+document.body.scrollHeight-b.scrollTop()-b.height();return c<a.bufferPx}}}(window,window.lib||(window.lib={}));